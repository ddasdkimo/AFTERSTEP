# ADR 0003: 紅點強度衰減使用指數衰減

## 狀態

已採納

## 背景

紅點代表「其他人曾在此存在」的痕跡，需要隨時間逐漸消失，以避免：
1. 長期累積導致紅點過多
2. 違反「不顯示他人」的核心原則

可選方案：
- **A: 線性衰減**：intensity = 1 - (t / maxTime)
- **B: 指數衰減**：intensity = exp(-t / τ)
- **C: 階梯式消失**：固定時間後直接消失

## 決策

選擇 **指數衰減** 算法，時間常數 τ = 5 天。

## 理由

1. **符合規格要求**：TECHNICAL_SPEC.md 明確指定指數衰減
2. **自然感覺**：指數衰減符合「記憶消退」的直覺
3. **平滑過渡**：不會突然消失，提供更好的視覺體驗
4. **數學特性**：5τ（25 天）後強度降至 0.67%，自然不可見

## 公式

```
intensity = exp(-Δt / τ)

其中：
- Δt = 當前時間 - 最後活動時間（天）
- τ = 5（天）
```

## 顯示門檻

當 `intensity < 0.1` 時不顯示紅點，相當於約 11.5 天後消失。

## 取捨

- **缺點**：需要每次計算時進行指數運算
- **緩解**：計算成本極低，且只對可見 Cell 計算

## 後果

- IntensityCalculator 實作指數衰減公式
- 紅點約 11-12 天後自然消失
- 頻繁訪問的區域會有較高強度的紅點
